<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

</head>
<style>
    table, th, td
{
    border: 1px solid black;
    border-collapse: collapse;
    padding: 10px;
    margin: 50px}
</style>

<body>
    <center>
        <table>
            <thead>
                <tr>
                    <th><b>Nama</b></th>
                    <th><b>Usia</b></th>
                    <th><b>Pekerjaan</b></th>
                    <th><b>Picture</b></th>
                    <th></th>
                </tr>
            </thead>
            <tbody id='isiTable'>

            </tbody>
            <tfoot>
                <tr>
                    <td><input type="text" placeholder="Masukan Nama"></td>
                    <td><input type="text" placeholder="Usia"></td>
                    <td><input type="text" placeholder="Pekerjaan"></td>
                    <td><input type="text" placeholder="Link Picture"></td>
                    <td><input type="button" onclick="tambahData()" value="Add"></td>
                </tr>
            </tfoot>
        </table>
        <table>
            <tr>
                <td><input type="text" placeholder="Filter by Name" style="padding: 10px"></td>
                <td><input type="text" placeholder="Filter by Age" style="padding: 10px"></td>
                <td><input type="text" placeholder="Filter by Job" style="padding: 10px"></td>
                <td><input type="button" value="Search" onclick="filter()"></td>
            </tr>

        </table>
        <h1 id="id"></h1>
    </center>

    <script>

        var data = []

        class Orang {
            constructor(nama, usia, pekerjaan, pict) {
                this.nama = nama;
                this.umur = usia;
                this.job = pekerjaan;
                this.pic = pict;
            }
        }

        var objectOrang = new Orang('Andi', '12', 'Karyawan', '.jpg')

       var filter = () => {
            var inputNama = document.getElementsByTagName('input')[5].value
            var inputUmur = document.getElementsByTagName('input')[6].value
            var inputJob = document.getElementsByTagName('input')[7].value
            var newData =[]
            for (var i = 0 ; i<data.length; i++){
                if (data[i].nama.startsWith(inputNama) && data[i].umur.startsWith(inputUmur) && data[i].job.startsWith(inputJob)){
                    newData.push(data[i])
                }
            }
            tampilData(newData)
        }


        // function filterNama(){
        //     var inputNama = document.getElementsByTagName('input')[5].value
        //     var newData = []
        //     for (var i = 0 ; i<data.length; i++){
        //         if (data[i].nama.includes(inputNama)){
        //             newData.push(data[i])
        //         }
        //     }
        //     tampilData(newData)

        // }

        // function filterUmur(){
        //     var inputUmur = document.getElementsByTagName('input')[6].value
        //     var newData = []
        //     for (var i = 0 ; i<data.length; i++){
        //         if (data[i].nama.includes(inputUmur)){
        //             newData.push(data[i])
        //         }
        //     }
        //     tampilData(newData)

        // }

        // function filterJob(){
        //     var inputJob = document.getElementsByTagName('input')[7].value
        //     var newData = []
        //     for (var i = 0 ; i<data.length; i++){
        //         if (data[i].job.includes(inputJob)){
        //             newData.push(data[i])
        //         }
        //     }
        //     tampilData(newData)

        // }

        function tampilData(arr) {
            var tampil = ''

            for (var i = 0; i < arr.length; i++) {
                tampil += ` <tr>
                                <td>${arr[i].nama}</td>
                                <td>${arr[i].umur}</td>
                                <td>${arr[i].job}</td>
                                <td><img src=${arr[i].pic} width="50px"></td>
                                <td><button>Add</button></td>
                                </tr> `
            }
            document.getElementById('isiTable').innerHTML = tampil
            document.getElementById('id').innerHTML = ''

        }

        function tambahData() {
            // var b = document.getElementsByTagName('input')[1].value
            // var c = document.getElementsByTagName('input')[2].value
            // var d = document.getElementsByTagName('input')[3].value

            var selektor = document.getElementsByTagName('input')
            var nama = selektor[0].value
            var usia = selektor[1].value
            var pekerjaan = selektor[2].value
            var link = selektor[3].value

            // var proteksi = true
            // do{
            if (nama == '' || usia == '' || pekerjaan == '' || link == '') {
                document.getElementById('id').innerHTML = '<h1>tidak boleh kosong</h1>'
            }
            else {
                var newMan = new Orang(nama, usia, pekerjaan, link)
                data.push(newMan)
                tampilData(data)

                // document.getElementById('isiTable').innerHTML += ` <tr>
                //                                                 <td>${nama}</td>
                //                                                 <td>${usia}</td>
                //                                                 <td>${pekerjaan}</td>
                //                                                 <td><img src=${link} width="50px"></td>
                //                                                 <td><button>Add</button></td>
                //                                              </tr> `
                document.getElementById('id').innerHTML = ''
            }


            for (var i = 0; i < 4; i++) {
                selektor[0].value = ''
                selektor[1].value = ''
                selektor[2].value = ''
                selektor[3].value = ''
            }
            // }while(proteksi==false)




        }
    </script>
</body>

</html>